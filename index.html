<!DOCTYPE html>
<html>
<head>
    <title>Push Notification Test</title>
    <script>
        async function subscribe() {
            const registration = await navigator.serviceWorker.register('/service-worker.js');
            console.log('Service Worker registered');

            const subscription = await registration.pushManager.subscribe({
                userVisibleOnly: true,
                applicationServerKey: 'BI4uHsHsKlpAJ_K4GZp-pQupJWlg53Ng6cO0iS8NQQ4zR9I765fGcQeH4OjfDYOcDIY4Y-tx7TjKv8FEu4Ya3Lk'
            });

            console.log('Push Subscription:', subscription);

            fetch('https://push-notifications-weld-three.vercel.app/api/save-subscription', {
                method: 'POST',
                body: JSON.stringify(subscription),
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(response => console.log('Subscription sent', response))
              .catch(error => console.error('Error sending subscription:', error));
        }
    </script>
</head>
<body>
    <button onclick="subscribe()">Enable Notifications</button>
</body>
</html>
